= EBImageのインストール方法 =

EBImageは，ImageMagickとGTK+という外部ライブラリを利用しているため，他のRのパッケージに比べてインストール方法が複雑です．基本的にはEBImageの[http://www.bioconductor.org/packages/devel/bioc/html/EBImage.html 公式サイト]（英語）に従えばインストールできるはずですが，OSによっては用いるライブラリのバージョンに注意が必要なこともあるので、ここではプログラミングに不慣れな読者でもつまづかないようにできるだけ細かく手順を示します．

= Windows =
Windows XPやWindows 7にEBImageをインストールするには以下の3点が必要となります．とくに，ImageMagickとGTK+のバージョンには注意が必要です．
 * ImageMagick
 * GTK+
 * abindパッケージ

ImageMagickはバージョン6.6より*古いもの*を用いなければなりません．古いバージョンはインターネット上を検索して探すこともできますが，[https://code.google.com/p/rimagebook/downloads/list 本サイトのダウンロードページ]からも再配布しています．これをダウンロードしてインストールしてください．

GTK+も最新バージョンではなく，バージョン2.16または2.20を用いなければなりません．[http://ftp.gnome.org/pub/gnome/binaries/win32/gtk+ ここ]からall-bundle binary のzip ファイル（ファイル名がgtk+-bundle で始まるもの）をダウンロードし，解凍した後に適当なディレクトリに置きます（例えばC:\gtk）．そして，このディレクトリにパスを通します．

abindはRを起動して
{{{
> install.packages("abind")
}}}
とすることでCRAN からインストールします．

以上の3つのライブラリがそろったら，いよいよEBImageをインストールします．
Rで以下のコマンドを打つだけです．
{{{
> source("http://www.bioconductor.org/biocLite.R")
> biocLite("EBImage")
> library(EBImage)
}}}

= Linux =
ここではUbuntu LinuxにRとEBImageをインストールする方法を述べます．32 bitバージョンも64 bitバージョンも同様の方法でインストールできます．ディストリビューションによってlibmagickwand-devはインストールしなくてもよい場合があります．

まず，Terminalを起動し，以下のコマンドでRをインストールします．
{{{
$ sudo apt-get update
$ sudo apt-get install r-base-dev
}}}
次にEBImageをインストールするために必要な外部ライブラリとしてpkg-configとImageMagickとgtkを入手します．また，Ubuntuのバージョンによってはlibmagickwand-devがImageMagickのコアパッケージに含まれていないことがあるので，別途インストールします．それぞれ以下のコマンドでインストールします．
{{{
$ sudo apt-get install pkg-config
$ sudo apt-get install imagemagick
$ sudo apt-get install libmagickcore-dev
$ sudo apt-get install libmagickwand-dev
$ sudo apt-get install libgtk2.0-dev
}}}
以上のライブラリが正しくインストールされていることを下記のコマンドで確認します．実行してエラーがでなければ大丈夫です．
{{{
$ pkg-config gtk+-2.0 --libs
$ Magick-config --libs
}}}
最後にRのパッケージであるabindとEBImageをダウンロードし，インストールします．パッケージのバージョン番号はその時の最新バージョンに変更してください．ぞれぞれのパッケージの最新バージョンは以下のウェブサイトで確認することができます．
 * http://cran.r-project.org/web/packages/abind/index.html
 * http://www.bioconductor.org/packages/devel/bioc/html/EBImage.html

{{{
$ sudo wget http://cran.r-project.org/src/contrib/abind_1.3-0.tar.gz
$ sudo R CMD INSTALL abind_1.3-0.tar.gz
$ sudo wget http://www.bioconductor.org/packages/2.10/bioc/src/contrib/EBImage_3.11.0.tar.gz
$ sudo R CMD INSTALL EBImage_3.11.0.tar.gz
$ R
> library(EBImage)
Loading required package: abind
}}}
となれば無事にインストールが完了です．


= Mac OS =
以下はMac OS 10.5 (Leopard)にEBImageをインストールする方法です．Mac OS 10.6 (Snow Leopard)にも同様の方法が適用できます．必要なのは以下の6点になります．
 * Xcode 3.1.4
 * MacPorts
 * ImageMagick
 * gtk+-2.0
 * X11 (XQuartz) 
 * abind
XcodeはOSに付属のディスクからインストールするか，Appleの[https://developer.apple.com/downloads/index.action Developerサイト]から入手します．

MacPortsは[http://www.macports.org/install.php ここ]から最新版を入手します．

ImageMagickはterminalから以下のコマンドでインストールします．
{{{
$ sudo port install ImageMagick
}}}
gtk+-2.0はterminalから以下のコマンドでインストールします．
{{{
$ sudo port install gtk2
}}}
<wiki:comment>
tcltkはRをバイナリからインストールした場合にのみ必要となる．[http://cran.us.r-project.org/bin/macosx/tools/ ここ]からダウンロードしてインストールする．
</wiki:comment>
X11 (XQuartz)は[http://xquartz.macosforge.org/trac/wiki ここ]から最新バージョンをダウンロードします．

abindはRのパッケージの一つなので，Rを起動して以下のコマンドでインストールします．
{{{
> install.packages("abind")
> library("abind")
}}}

以上でEBImageをインストールする準備が整ったので，terminalで次のようにしてダウンロードし，インストールします．
{{{
$ curl -O "http://www.bioconductor.org/packages/2.10/bioc/src/contrib/EBImage_3.11.0.tar.gz"
$ R CMD INSTALL EBImage_3.11.0.tar.gz
}}}
ただし，2.10や3.11.0の部分はその時に公開されているバージョンに合わせて変更が必要です．