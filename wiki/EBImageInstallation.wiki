#summary Install guide for EBImage

= Introduction =

EBImageは，いくつかの外部ライブラリを利用しており，他のRのパッケージに比べてインストールの方法が複雑である．そこで，このページではWindowsとMac OSとLinuxにEBImageをインストールする方法を詳しく説明する．基本的にEBImageの[http://www.bioconductor.org/packages/devel/bioc/html/EBImage.html 公式サイト]（英語）に載っている方法に従っているが，プログラミングの初心者でもつまづかないようにできるだけ細かく手順を示す．

= Windows =
WindowsにEBImageをインストールする方法は，本の中で述べたのでここでは繰り返さないが，必要となる外部ライブラリのうちImageMagickはバージョンが6.6 *以前*を用いなければならない点に注意が必要である．古いバージョンはインターネット上を検索して探すこともできるが，探す手間を省くために[https://code.google.com/p/rimagebook/downloads/list 本サイトのダウンロードページ]から配布する．

= Linux =
ここではUbuntu LinuxにRとEBImageとbiOpsをインストールする方法を述べる．32 bitバージョンも64 bitバージョンも同様の方法でインストールできる．その他のLinuxディストリビューションも多少コマンドの違いはあるが，同様の方法でインストールできるはずである．ただし，ディストリビューションによってlibmagickwand-devはインストールしなくてもよい場合がある．

Terminalを起動し，以下のコマンドでRをインストールする．
{{{
$ sudo apt-get update
$ sudo apt-get install r-base-dev
}}}
次にEBImageをインストールするための準備をする．EBImageをインストールするには，外部ライブラリとしてpkg-configとImageMagickとgtkが必要である．また，Ubuntuのバージョンによってはlibmagickwand-devがimagemagickのコアパッケージに含まれていないことがあるので，別途インストールしておく．それぞれ以下のコマンドでインストールされる．
{{{
$ sudo apt-get install pkg-config
$ sudo apt-get install imagemagick
$ sudo apt-get install libmagickcore-dev
$ sudo apt-get install libmagickwand-dev
$ sudo apt-get install libgtk2.0-dev
}}}
以上のライブラリが正しくインストールされていることを確認しておく．下記のコマンドを実行してエラーがでなければよい．
{{{
$ pkg-config gtk+-2.0 --libs
$ Magick-config --libs
}}}
最後にabindとEBImageをダウンロードし，インストールする．パッケージのバージョン番号は適宜，最新バージョンに変更してほしい．ぞれぞれのパッケージの最新バージョンは以下のウェブサイトで確認できる．
 * http://cran.r-project.org/web/packages/abind/index.html
 * http://www.bioconductor.org/packages/devel/bioc/html/EBImage.html

{{{
$ sudo wget http://cran.r-project.org/src/contrib/abind_1.3-0.tar.gz
$ sudo R CMD INSTALL abind_1.3-0.tar.gz
$ sudo wget http://www.bioconductor.org/packages/2.10/bioc/src/contrib/EBImage_3.11.0.tar.gz
$ sudo R CMD INSTALL EBImage_3.11.0.tar.gz
$ R
> library(EBImage)
Loading required package: abind
}}}
となれば無事にインストールが完了している．


= Mac OS =
以下はMac OS 10.5 (Leopard)にEBImageをインストールする方法である．Mac OS 10.6 (Snow Leopard)にもほぼ同様にインストールできる．必要なのは以下の7点である．
 * Xcode 3.1.4
 * MacPorts
 * ImageMagick
 * gtk+-2.0
 * tcltk
 * XQuartz 
 * abind
XcodeはOSに付属のディスクからインストールするか，Appleの[https://developer.apple.com/downloads/index.action Developerサイト]から入手する．

MacPortsは[http://www.macports.org/install.php ここ]から最新版を入手す
る．

ImageMagickはterminalから以下のコマンドでインストールする．
{{{
$ sudo port install ImageMagick
}}}
gtk+-2.0はterminalから以下のコマンドでインストールする．
{{{
$ sudo port install gtk2
}}}
tcltkはRをバイナリからインストールした場合にのみ必要となる．[http://cran.us.r-project.org/bin/macosx/tools/ ここ]からダウンロードしてインストールする．

XQuartzは[http://xquartz.macosforge.org/trac/wiki ここ]から最新バージョンをダウンロードする．

abindはRのパッケージの一つなので，Rを起動して以下のコマンドでインストールする．
{{{
> install.packages("abind")
> library("abind")
}}}

以上でEBImageをインストールする準備が整ったので，terminalで次のようにしてダウンロードし，インストールする．
{{{
$ curl -O "http://www.bioconductor.org/packages/2.10/bioc/src/contrib/EBImage_3.11.0.tar.gz"
$ R CMD INSTALL EBImage_3.11.0.tar.gz
}}}
ただし，2.10や3.11.0の部分はその時に公開されているバージョンに合わせて変更すること．